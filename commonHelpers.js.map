{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/octagon.svg","../src/img/bell.svg","../src/img/check2circle.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43304487-b7d5c7fa3c9a8a42508d5a037';\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const getFotos = async (str, page, per_page) => {\n  const axiosOptions = {\n    params: {\n      key: API_KEY,\n      q: str,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      page,\n      per_page,\n      safesearch: 'true',\n    },\n  };\n\n  return await axios.get(`/api/`, axiosOptions);\n};\n\n// export const getFotos = (str, page, per_page) => {\n//   const API_KEY = '43304487-b7d5c7fa3c9a8a42508d5a037';\n//   const BASE_URL = 'https://pixabay.com/api';\n//   const ENDPOINT = '';\n\n//   const params = new URLSearchParams({\n//     key: API_KEY,\n//     q: str,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     page,\n//     per_page,\n//     safesearch: 'true',\n//   });\n\n//   return fetch(`${BASE_URL}${ENDPOINT}/?${params}`).then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.status);\n//     }\n//     console.log(response);\n\n//     return response.json();\n//   });\n// };\n\n// export async function fetchImages(str) {\n//   try {\n//     const response = await fetch(\n//       `https://pixabay.com/api/?key=${API_KEY}&q=${str}&image_type=photo`\n//     );\n//     const data = await response.json();\n//     console.log(data);\n//     return data;\n//   } catch (error) {\n//     console.error('Error fetching data:', error);\n//   }\n// }\n","export function renderImages(images) {\n  return images\n    .map(\n      object => `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${object.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${object.webformatURL}\"\n          data-source=\"${object.largeImageURL}\"\n          alt=\"${object.tags}\"\n          title=\"${object.tags}\"\n        />\n        <div class=\"gallery-stat\">\n           <div class=\"gallery-stat-item\">\n              <b class=\"gallery-stat-item-b\">Likes</b>\n              <p class=\"gallery-stat-item-p\">${object.likes}</p>\n            </div>\n            <div class=\"gallery-stat-item\">\n              <b class=\"gallery-stat-item-b\">Views</b>\n              <p class=\"gallery-stat-item-p\">${object.views}</p>\n            </div>\n            <div class=\"gallery-stat-item\">\n              <b class=\"gallery-stat-item-b\">Comments</b>\n              <p class=\"gallery-stat-item-p\">${object.comments}</p>\n            </div>\n          <div class=\"gallery-stat-item\">\n              <b class=\"gallery-stat-item-b\">Downloads</b>\n              <p class=\"gallery-stat-item-p\">${object.downloads}</p>\n          </div>\n        </div>      \n      </a>\n    </li>`\n    )\n    .join('');\n}\n","export default \"__VITE_ASSET__de411352__\"","export default \"__VITE_ASSET__e8090f10__\"","export default \"__VITE_ASSET__485e202e__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getFotos } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\nimport octagon from './img/octagon.svg';\nimport bell from './img/bell.svg';\nimport check2circle from './img/check2circle.svg';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionData: 'alt',\n  captionDelay: 250,\n});\n\nconst form = document.querySelector('.form-search');\nconst imagesList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst getFotosBtn = document.querySelector('.btn-load-more');\n\nform.addEventListener('submit', handleSubmit);\ngetFotosBtn.addEventListener('click', OnBtnLoadMore);\n\nlet page = 1;\nconst per_page = 15;\nlet formSearch = null;\nlet lastPage = null;\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  formSearch = event.currentTarget.elements.search.value.trim();\n  imagesList.innerHTML = '';\n  page = 1;\n\n  if (formSearch === '') {\n    getFotosBtn.classList.add('is-hidden');\n    showMessage(`You entered an empty string!`, '#EF4040', octagon);\n    form.reset();\n  } else {\n    try {\n      getFotosBtn.classList.add('is-hidden');\n      showLoader();\n      // const res = await getFotos(formSearch, page, per_page);\n      // на цьому робимо глибоку деструктуризацію\n      const {\n        data: { totalHits, hits },\n      } = await getFotos(formSearch, page, per_page);\n      if (hits.length != 0) {\n        // було так\n        //if (res.data.hits.length != 0) {\n        // lastPage = Math.ceil(res.data.totalHits / per_page);\n        lastPage = Math.ceil(totalHits / per_page);\n        imagesList.innerHTML = renderImages(hits);\n        lightbox.refresh();\n        showMessage(`We found ${totalHits} images!`, '#59A10D', check2circle);\n        if (totalHits > per_page) {\n          getFotosBtn.classList.remove('is-hidden');\n        }\n      } else {\n        showMessage(\n          `Sorry, there are no images matching \n            your search query. Please, try again!`,\n          '#EF4040',\n          octagon\n        );\n      }\n      form.reset();\n    } catch (error) {\n      // сonsole.log(error.response.status);\n      console.log(error.message);\n      showMessage(\n        `Ups! Something went wrong, please try again later!`,\n        '#EF4040',\n        octagon\n      );\n    } finally {\n      hideLoader();\n    }\n  }\n}\n\nfunction showMessage(message, backgroundColor, iconUrl) {\n  // частково короткі властивості\n  iziToast.show({\n    message,\n    messageColor: 'white',\n    backgroundColor,\n    closeOnEscape: true,\n    position: 'topRight',\n    iconUrl,\n    iconColor: 'white',\n    iconColor: 'white',\n    theme: 'dark',\n    maxWidth: '350px',\n  });\n}\n\nfunction showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nasync function OnBtnLoadMore() {\n  getFotosBtn.classList.add('is-hidden');\n  showLoader();\n  page += 1;\n  try {\n    // const res = await getFotos(formSearch, page, per_page);\n    // на цьому робимо глибоку деструктуризацію\n    const {\n      data: { hits },\n    } = await getFotos(formSearch, page, per_page);\n\n    imagesList.insertAdjacentHTML('beforeend', renderImages(hits));\n    lightbox.refresh();\n\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    getFotosBtn.classList.remove('is-hidden');\n    if (lastPage === page) {\n      getFotosBtn.classList.add('is-hidden');\n\n      showMessage(\n        `We're sorry, but you've reached the end of search results.`,\n        '#0099FF',\n        bell\n      );\n    }\n  } catch (error) {\n    // сonsole.log(error.response.status);\n    console.log(error.message);\n    showMessage(\n      `Ups! Something went wrong, please try again later!`,\n      '#EF4040',\n      octagon\n    );\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["API_KEY","axios","getFotos","str","page","per_page","axiosOptions","renderImages","images","object","octagon","bell","check2circle","lightbox","SimpleLightbox","form","imagesList","loader","getFotosBtn","handleSubmit","OnBtnLoadMore","formSearch","lastPage","event","showMessage","showLoader","totalHits","hits","error","hideLoader","message","backgroundColor","iconUrl","iziToast","cardHeight"],"mappings":"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"}